<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:com="clr-namespace:PassMeta.DesktopApp.Common;assembly=PassMeta.DesktopApp.Common"
             xmlns:storage="clr-namespace:PassMeta.DesktopApp.Ui.ViewModels.Storage"
             x:Class="PassMeta.DesktopApp.Ui.Views.StorageView"
             mc:Ignorable="d"
             d:DesignWidth="800"
             d:DesignHeight="450"
             d:DataContext="{d:DesignInstance storage:StorageViewModel}">
    <Grid>
        <SplitView DisplayMode="CompactInline"
                   OpenPaneLength="200"
                   CompactPaneLength="50"
                   PaneBackground="Transparent"
                   IsPaneOpen="{Binding IsPassFilesBarOpened}">
            <SplitView.Pane>
                <Grid RowDefinitions="Auto,*">
                    <ToggleButton Grid.Row="0"
                               Margin="4 5 0 12"
                               Padding="0"
                               Height="40"
                               IsChecked="{Binding IsPassFilesBarOpened}"
                               HorizontalContentAlignment="Center"
                               VerticalContentAlignment="Center"
                               Width="{Binding PassFilesBarBtn.Width}"
                               Content="{Binding PassFilesBarBtn.Content}"
                               FontSize="{Binding PassFilesBarBtn.FontSize}"
                               FontFamily="{Binding PassFilesBarBtn.FontFamily}"/>

                    <!-- PassFileList -->
                    <ListBox Grid.Row="1"
                             Margin="4 0 5 5"
                             SelectionMode="Toggle"
                             CornerRadius="3"
                             SelectedIndex="{Binding PassFilesSelectedIndex}"
                             Items="{Binding PassFileList}">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Name="TextBlock"
                                           Text="{Binding Name}"
                                           Foreground="{Binding Foreground}"/>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                        
                        <ListBox.Styles>
                            <Style Selector="ListBoxItem">
                                <Setter Property="CornerRadius" Value="3"/>
                                <Setter Property="Height" Value="40"/>
                                <Setter Property="Margin" Value="0 0 0 8"/>
                                <Setter Property="ContextMenu">
                                    <ContextMenu PlacementAnchor="Bottom">
                                        <MenuItem Header="{x:Static com:Resources.STORAGE__CONTEXT_RENAME}"
                                                  Command="{Binding PassFileRenameAsync}"/>
                                        
                                        <MenuItem Header="{x:Static com:Resources.STORAGE__CONTEXT_ARCHIVE}"
                                                  Command="{Binding PassFileRenameAsync}"/>
                                        
                                        <MenuItem Header="{x:Static com:Resources.STORAGE__CONTEXT_DELETE}"
                                                  Command="{Binding PassFileDeleteAsync}"/>
                                    </ContextMenu>
                                </Setter>
                            </Style>
                        </ListBox.Styles>
                        
                        <ListBox.ContextMenu>
                            <ContextMenu PlacementAnchor="Bottom">
                                <MenuItem Header="{x:Static com:Resources.STORAGE__CONTEXT_ADD}"
                                          Command="{Binding PassFileAddAsync}"/>
                            </ContextMenu>
                        </ListBox.ContextMenu>
                    </ListBox>
                </Grid>
            </SplitView.Pane>
            
            <Grid ColumnDefinitions="2*,3*">
                <!-- PassFileSectionList -->
                <ListBox Grid.Column="0"
                         Margin="0 6 5 5"
                         SelectionMode="Toggle"
                         SelectedIndex="{Binding PassFilesSelectedSectionIndex}"
                         Items="{Binding PassFileSectionList}"
                         IsVisible="{Binding IsSectionsBarVisible}">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Name}"/>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                        
                    <ListBox.Styles>
                        <Style Selector="ListBoxItem">
                            <Setter Property="ContextMenu">
                                <ContextMenu PlacementAnchor="Bottom">
                                    <MenuItem Header="{x:Static com:Resources.STORAGE__CONTEXT_RENAME}"
                                              Command="{Binding SectionRenameAsync}"/>
                                        
                                    <MenuItem Header="{x:Static com:Resources.STORAGE__CONTEXT_DELETE}"
                                              Command="{Binding SectionDeleteAsync}"/>
                                </ContextMenu>
                            </Setter>
                        </Style>
                    </ListBox.Styles>
                    
                    <ListBox.ContextMenu>
                        <ContextMenu PlacementAnchor="Bottom">
                            <MenuItem Header="{x:Static com:Resources.STORAGE__CONTEXT_ADD}"
                                      Command="{Binding  SectionAddAsync}"/>
                        </ContextMenu>
                    </ListBox.ContextMenu>
                </ListBox>
                
                <TextBlock Grid.Column="0"
                           FontSize="16"
                           Foreground="DarkGray"
                           VerticalAlignment="Center"
                           HorizontalAlignment="Center"
                           Text="{x:Static com:Resources.STORAGE__NO_SECTIONS}"
                           IsVisible="{Binding IsNoSectionsTextVisible}"/>
                
                <!-- PassFileSectionItemList -->
                <ListBox Grid.Column="1"
                         Margin="0 6 5 5"
                         Items="{Binding PassFileSectionItemList}" 
                         IsVisible="{Binding IsItemsBarVisible}">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding What}"/>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
                
                <TextBlock Grid.Column="1"
                           FontSize="16"
                           Foreground="DarkGray"
                           VerticalAlignment="Center"
                           HorizontalAlignment="Center"
                           Text="{x:Static com:Resources.STORAGE__NO_ITEMS}"
                           IsVisible="{Binding IsNoItemsTextVisible}"/>
            </Grid>
        </SplitView>
    </Grid>
</UserControl>